# Frontend Dashboard

React + Vite dashboard for displaying portfolio performance and market analysis.

## Quick Start

```bash
cd frontend

# Install dependencies
npm install

# Development server (http://localhost:5173)
npm run dev

# Production build
npm run build
```

## Project Structure

```
frontend/
├── src/
│   ├── components/       # React components
│   │   ├── HeroMetrics.tsx        # Key portfolio metrics
│   │   ├── EquityCurve.tsx        # Portfolio value chart
│   │   ├── DrawdownChart.tsx      # Drawdown visualization
│   │   ├── MonthlyReturnsHeatmap.tsx  # Calendar heatmap
│   │   ├── WeatherReport.tsx      # Market weather + regime
│   │   ├── PortfolioTable.tsx     # Current holdings
│   │   └── CandidatesTable.tsx    # Buy candidates
│   ├── hooks/
│   │   └── useDashboardData.ts    # Data fetching hook
│   ├── types/
│   │   └── index.ts               # TypeScript interfaces
│   ├── App.tsx                    # Main app component
│   └── index.css                  # Global styles
├── public/
│   ├── data/
│   │   └── dashboard.json         # Sample data
│   └── chart.svg                  # Favicon
└── dist/                          # Build output
```

## Data Source

The dashboard fetches data from `./data/dashboard.json` by default. In production, this file is generated by the Lambda pipeline and uploaded to S3.

### Environment Variable

Set `VITE_DATA_URL` to customize the data endpoint:

```bash
VITE_DATA_URL=https://your-bucket.s3.amazonaws.com/dashboard/latest.json npm run build
```

## Dashboard Components

### Hero Metrics
- Total portfolio value
- YTD and MTD returns
- Sharpe ratio
- Max drawdown
- Win rate

### Equity Curve
- Portfolio value over time
- SPY benchmark comparison
- Interactive tooltip

### Drawdown Chart
- Drawdown percentage over time
- Red fill visualization

### Monthly Returns Heatmap
- Color-coded returns by month/year
- Green (positive) to red (negative)
- YTD totals

### Weather Report
- LLM-generated market summary
- Current regime indicator
- Key risks

### Portfolio Tables
- Current holdings with P&L
- Top buy candidates with scores

## Deployment to S3

The frontend is designed for S3 static website hosting.

```bash
# Build
cd frontend
npm run build

# Upload to S3 (handled by Cursor via DEPLOY.md)
aws s3 sync dist/ s3://investment-system-data/dashboard/ --delete
```

### S3 Static Website Configuration

1. Enable static website hosting on bucket
2. Set index document to `index.html`
3. Ensure public read access or CloudFront distribution

## Data Schema

See `src/types/index.ts` for the complete TypeScript interfaces. Key types:

```typescript
interface DashboardData {
  metrics: PortfolioMetrics;
  holdings: Holding[];
  candidates: BuyCandidate[];
  equity_curve: EquityCurvePoint[];
  drawdowns: DrawdownPoint[];
  monthly_returns: MonthlyReturn[];
  weather: WeatherReport;
}
```

## Dependencies

- React 18
- Recharts (charting)
- date-fns (date formatting)
- TypeScript
- Vite

## Styling

Uses CSS custom properties for theming. Dark theme by default.

Key colors:
- `--bg-primary`: #0f172a (background)
- `--accent-green`: #22c55e (positive)
- `--accent-red`: #ef4444 (negative)
- `--accent-blue`: #3b82f6 (primary accent)
